<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RPSIT Timetable | GAN</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div id="timetable" class="">
      <table class="header-table">
        <tr>
          <td colspan="2">
            <div class="img-container">
              <img src="./college.png" alt="" />
            </div>
          </td>
          <td colspan="2" class="section-title">TIME TABLE</td>
        </tr>
        <tr>
          <th>Document ID</th>
          <td contenteditable="true">Placeholder</td>
          <th>Document Name</th>
          <td contenteditable="true">Placeholder</td>
        </tr>
        <tr>
          <th>Programme</th>
          <td contenteditable="true"></td>
          <th>Year / Sem</th>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <th>Regulation</th>
          <td contenteditable="true"></td>
          <th>Odd / Even</th>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <th>Academic Year:</th>
          <td contenteditable="true"></td>
          <th>W.e.f</th>
          <td contenteditable="true"></td>
        </tr>
      </table>
      <table id="main-timetable">
        <tr>
          <th colspan="4" class="left">Class Advisor</th>
          <th colspan="4" contenteditable="true" class="left">***</th>
          <th colspan="5" contenteditable="true" class="left">Section:**</th>
        </tr>
        <tr>
          <th>&nbsp;&nbsp;&nbsp;Day&nbsp;&nbsp;&nbsp;</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">
              9.00 to 9.05 am <br />Concept of the day
            </div>
          </td>
          <th contenteditable="true">9.05am - 10.00am</th>
          <th contenteditable="true">10.00am - 11.00am</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">11.00 to 11.15 am <br />Break</div>
          </td>
          <th contenteditable="true">11.15am - 12.15pm</th>
          <th contenteditable="true">12.15pm - 1.00pm</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">1.00 to 1.40 pm <br />Lunch</div>
          </td>
          <th contenteditable="true">1.40pm - 2.20pm</th>
          <th contenteditable="true">2.20pm - 3.00pm</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">3.00 to 3.10 pm <br />Break</div>
          </td>
          <th contenteditable="true">3.10pm - 3.50pm</th>
          <th contenteditable="true">3.50pm - 4.30pm</th>
        </tr>
        <tr>
          <td contenteditable="true">Day-1</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-2</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-3</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-4</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-5</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-6</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
      </table>

      <table class="subject-info" id="subject-info">
        <tr>
          <th>S.No</th>
          <th>Acronym</th>
          <th>Subject<br />Code</th>
          <th>Subject Name</th>
          <th>Work<br />load</th>
          <th>Faculty Members</th>
        </tr>
        <tr>
          <td>1</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
      </table>
      <div class="add-row-btn">
        <button onclick="addSubjectRow()">+ Add Row</button>
      </div>
      <table class="table-bottom">
        <tr>
          <th>Time Table Incharge</th>
          <th>HOD</th>
          <th>Principal</th>
        </tr>
        <tr>
          <th contenteditable="true">Placeholder</th>
          <th contenteditable="true">Placeholder</th>
          <th>(Dr.Munusami Viswanathan)</th>
        </tr>
      </table>
    </div>

    <div class="buttons">
      <button onclick="printTimetable()" title="Print the TimeTable">
        Print Timetable
      </button>
      <button onclick="resetHeader()" title="Reset the top Header Field">
        Reset Header
      </button>
      <button onclick="resetCells()" title="Reset the TimeTable Field">
        Reset Timetable
      </button>
      <button onclick="resetSubjectDetails()" title="Reset the Subject Field">
        Reset Subject
      </button>
      <button onclick="mergeSimilarCells()" title="Merge the Common Subjects">
        Merge Cells
      </button>
    </div>
    <script>
      let sNo = 1;
      function printTimetable() {
        const printContents = document.getElementById("timetable").innerHTML;
        const originalContents = document.body.innerHTML;
        document.body.innerHTML = printContents;
        document.body.style.fontSize = `12px`;
        document.querySelector(".add-row-btn").style.display = "none";
        document.querySelector("#main-timetable").style.fontSize = "10px";
        window.print();
        document.body.innerHTML = originalContents;
        document.body.style.fontSize = `1rem`;
      }
      function resetHeader() {
        let headerContent = `
        
        <tr>
          <td colspan="2">
            <div class="img-container">
              <img src="./college.png" alt="" />
            </div>
          </td>
          <td colspan="2" class="section-title">Time Table</td>
        </tr>
        <tr>
          <th>Document ID</th>
          <td contenteditable="true">Placeholder</td>
          <th>Document Name</th>
          <td contenteditable="true">Placeholder</td>
        </tr>
        <tr>
          <th>Programme</th>
          <td contenteditable="true"></td>
          <th>Year / Sem</th>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <th>Regulation</th>
          <td contenteditable="true"></td>
          <th>Odd / Even</th>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <th>Academic Year:</th>
          <td contenteditable="true"></td>
          <th>W.e.f</th>
          <td contenteditable="true"></td>
        </tr>
        `;
        document.querySelector(".header-table").innerHTML = headerContent;
      }
      function resetCells() {
        let contentTable = `
        
        <tr>
          <th colspan="4" class="left">Class Advisor</th>
          <th colspan="4" contenteditable="true" class="left">***</th>
          <th colspan="5" contenteditable="true" class="left">Section:**</th>
        </tr>
        <tr>
          <th>&nbsp;&nbsp;&nbsp;Day&nbsp;&nbsp;&nbsp;</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">
              9.00 to 9.05 am <br />Concept of the day
            </div>
          </td>
          <th contenteditable="true">9.05am - 10.00am</th>
          <th contenteditable="true">10.00am - 11.00am</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">11.00 to 11.15 am <br />Break</div>
          </td>
          <th contenteditable="true">11.15am - 12.15pm</th>
          <th contenteditable="true">12.15pm - 1.00pm</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">1.00 to 1.40 pm <br />Lunch</div>
          </td>
          <th contenteditable="true">1.40pm - 2.20pm</th>
          <th contenteditable="true">2.20pm - 3.00pm</th>
          <td rowspan="7" contenteditable="true">
            <div class="timebreak">3.00 to 3.10 pm <br />Break</div>
          </td>
          <th contenteditable="true">3.10pm - 3.50pm</th>
          <th contenteditable="true">3.50pm - 4.30pm</th>
        </tr>
        <tr>
          <td contenteditable="true">Day-1</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-2</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-3</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-4</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-5</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">Day-6</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>

          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
      `;
        document.querySelector("#main-timetable").innerHTML = contentTable;
      }
      function resetSubjectDetails() {
        let content = `
        <tr>
          <th>S.No</th>
          <th>Acronym</th>
          <th>Subject<br/>Code</th>
          <th>Subject Name</th>
          <th>Work<br/>load</th>
          <th>Faculty Members</th>
        </tr>
        <tr >
          <td >1</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
              `;
        document.querySelector(".subject-info").innerHTML = content;
        sNo = 1;
      }
      function mergeSimilarCells() {
        const rows = document.querySelectorAll("#main-timetable tr");
        rows.forEach((row) => {
          const cells = row.querySelectorAll("td");
          let prevText = "";
          let span = 1;
          for (let i = cells.length - 1; i > 0; i--) {
            const currentText = cells[i].textContent.trim().toLowerCase();
            const prevCellText = cells[i - 1].textContent.trim().toLowerCase();
            if (currentText && currentText === prevCellText) {
              span++;
              cells[i - 1].colSpan = span;
              cells[i].remove();
            } else {
              span = 1;
            }
          }
        });
      }

      function addSubjectRow() {
        const table = document.getElementById("subject-info");
        const newRow = table.insertRow();
        // newRow.contentEditable = true;
        for (let i = 0; i < 6; i++) {
          newRow.insertCell(i).innerHTML = "";
        }
        newRow.children[0].innerText = ++sNo;
        newRow.querySelectorAll("td").forEach((cell) => {
          cell.contentEditable = true;
        });
        newRow.children[0].contentEditable = false;
      }
    </script>
  </body>
</html>
